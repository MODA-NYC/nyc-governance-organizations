# GitHub Release Guide

## Overview

When publishing a new version, the `publish_run.py` script generates all files needed for a GitHub release. This guide explains what files are created and how to use them.

## Files Generated by Publish Script

After running `publish_run.py`, the following files are available for GitHub release:

### 1. Published Dataset Files
**Location:** `data/published/`

- `NYCGovernanceOrganizations_{version}_final.csv` - Versioned published dataset
- `NYCGovernanceOrganizations_latest.csv` - Copy of latest published dataset (for GitHub releases)
- `RELEASE_NOTES_{version}.md` - Release notes markdown file

### 2. Run Artifacts Bundle
**Location:** `dist/`

- `nycgo-run-{run_id}.zip` - Full run artifacts bundle (inputs, outputs, run summary, changelog)

### 3. Run Changelog
**Location:** `data/audit/runs/{run_id}/outputs/`

- `run_changelog.csv` - Run-specific changelog

## Creating a GitHub Release

### Step 1: Run the Publish Script

```bash
python scripts/pipeline/publish_run.py \
  --run-dir data/audit/runs/{run_id} \
  --version v1.1.0 \
  --append-changelog \
  --operator nathanstorey
```

### Step 2: Collect Files for Release

The publish script generates:
1. **Release Notes:** `data/published/RELEASE_NOTES_{version}.md` - Copy this content for the release description
2. **Dataset Files:**
   - `data/published/NYCGovernanceOrganizations_{version}_final.csv`
   - `data/published/NYCGovernanceOrganizations_latest.csv`
3. **Run Bundle:** `dist/nycgo-run-{run_id}.zip`
4. **Changelog:** `data/audit/runs/{run_id}/outputs/run_changelog.csv`

### Step 3: Create GitHub Release

1. Go to GitHub → Releases → Draft a new release
2. **Tag:** `v{version}` (e.g., `v1.1.0`)
3. **Title:** `NYC Agencies and Governance Organizations {version}`
4. **Description:** Copy content from `RELEASE_NOTES_{version}.md`
5. **Attach Files:**
   - `nycgo-run-{run_id}.zip`
   - `NYCGovernanceOrganizations_{version}_final.csv`
   - `NYCGovernanceOrganizations_latest.csv`
   - `run_changelog.csv`

## Release Notes Format

The `RELEASE_NOTES_{version}.md` file includes:
- Run ID and publish date
- Summary of pipeline run
- Record count
- Change statistics (QA edits, global rules, directory field changes)
- Bundle contents description
- List of attached assets

## Future Enhancement: GitHub Actions

Eventually, the publish script will trigger a GitHub Action that:
1. Automatically creates a GitHub release
2. Uploads all release assets
3. Uses the generated release notes
4. Tags the release with the version number

This automation will eliminate the manual step of creating releases.
