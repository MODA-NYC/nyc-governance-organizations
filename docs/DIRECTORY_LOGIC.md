# NYC.gov Agency Directory Logic

<!-- DO NOT EDIT THIS FILE DIRECTLY -->
<!-- Auto-generated from src/nycgo_pipeline/directory_rules.py -->
<!-- To update: edit directory_rules.py, then run: -->
<!-- python scripts/generate_directory_docs.py --changed-by 'username' -->

## Recent Changes

| Date | Change | Rule | Details |
|------|--------|------|---------|
| 2026-01-21 | Rule Modified | pension_fund | Pension Fund: included if on allowlist (city emplo... |
| 2026-01-21 | Rule Modified | state_government_agency | State Government Agency: always included |
| 2025-12-10 | Exemption Added | state_government_exemptions | Richmond County Public Administrator |
| 2025-12-10 | Exemption Added | state_government_exemptions | City University of New York |
| 2025-12-10 | Exemption Added | state_government_exemptions | Public Administrator of Queens County |

*See `data/directory_logic_changelog.csv` for full history.*

---

## Overview

This document describes the rules that determine whether an organization
appears in the NYC.gov Agency Directory. These rules are defined in
`src/nycgo_pipeline/directory_rules.py`.

---

## Gatekeeper Rules

**ALL** of these must pass for a record to be considered:

- **active_status**: OperationalStatus must be 'Active'
- **no_state_nygov_url**: URL must not be state .ny.gov (city .nyc.gov is OK)
- **has_contact_info**: Must have: URL, principal officer name, or officer contact URL

---

## Type-Specific Rules

After passing gatekeeper rules, **at least one** type-specific rule must pass:

- **mayoral_agency**: Mayoral Agency: always included
- **mayoral_office**: Mayoral Office: always included
- **elected_office**: Elected Office: always included
- **pension_fund**: Pension Fund: included if on allowlist (city employee funds)
- **state_government_agency**: State Government Agency: always included
- **division_in_org_chart**: Division: included if in Org Chart
- **public_benefit_in_org_chart**: Public Benefit or Development Org: included if in Org Chart
- **nonprofit_in_org_chart_or_exemption**: Nonprofit Organization: included if in Org Chart OR exemption
- **advisory_in_org_chart_or_url_or_exemption**: Advisory/Regulatory Org: Org Chart, main nyc.gov URL, or exempt

---

## Exemption Lists

### Nonprofit Exemptions

These nonprofits are included even if not in Org Chart:

- Brooklyn Public Library
- Gracie Mansion Conservancy
- Mayor's Fund to Advance New York City
- New York City Tourism + Conventions
- New York Public Library
- Queens Public Library

### Advisory Exemptions

These advisory organizations are included even if not in Org Chart:

- Board of Elections
- Campaign Finance Board
- Rent Guidelines Board

### State Government Exemptions

These NYC-affiliated state agencies are included in the directory:

- Bronx County Public Administrator
- City University of New York
- Kings County Public Administrator
- New York County Public Administrator
- Public Administrator of Queens County
- Richmond County Public Administrator

### Published Export Exceptions

These records are always included in the published export:

- `NYC_GOID_000354`: Office of Collective Bargaining
- `NYC_GOID_000476`: MTA (Metropolitan Transportation Authority)
- `NYC_GOID_100030`: Office of Digital Assets and Blockchain

---

*Auto-generated from `src/nycgo_pipeline/directory_rules.py`*

*See [ARCHITECTURE_DIRECTORY_LOGIC.md](ARCHITECTURE_DIRECTORY_LOGIC.md) for how this system works.*
